project_id: property-scraper
name: Property Scraper
version: "0.1.0"
updated_at: "2026-02-19"

north_star:
  statement: "Never miss a matching property listing in the Oldham area."
  primary_user_job: "Get email alerts for new 3-bed houses under 230k with gardens."
  tone: "Functional, reliable, quiet unless there's news"

laws:
  - id: law.scraping.playwright
    rule: "Always use Playwright with headless Chromium - both sites require JS rendering."
    strength: hard
    applies_to: [scraping]
    rationale: "Rightmove and Zoopla are JS-heavy. requests/BeautifulSoup won't work."

  - id: law.scraping.antiblock
    rule: "Include random delays (2-5s), rotating User-Agents, and respect rate limits."
    strength: hard
    applies_to: [scraping]
    rationale: "Avoid IP bans and detection."

  - id: law.data.prefix
    rule: "Property IDs must be prefixed with site code (rm_ for Rightmove, zp_ for Zoopla)."
    strength: hard
    applies_to: [data]
    rationale: "Prevents ID collisions between sites."

  - id: law.extraction.regex
    rule: "Extract data via regex from parent text content, not brittle CSS selectors."
    strength: soft
    applies_to: [scraping]
    rationale: "CSS selectors break when sites update. Text patterns are more stable."

constraints:
  do_not:
    - "Scrape without delays between requests."
    - "Store credentials in code - use .env file."
    - "Send duplicate property alerts."
    - "Ignore lazy-loaded content - scroll to trigger it."

deciding_axes:
  - "Reliability over speed - better to scrape slowly than get blocked."
  - "Deduplication over completeness - never email the same property twice."
  - "Simple alerts over feature-rich UI - this is a background job."

conflict_policy:
  order: ["hard laws", "constraints", "soft laws"]
  tie_break: stricter_wins
