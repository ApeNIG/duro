# Memory Log - 2026-02-15

### [00:25] Task Completed
**Task:** Optimized Duro workflow for autonomous design process
**Outcome:** Created dual_direction_design skill, updated soul.md with design philosophy, updated MEMORY.md with design preferences, created evaluation template. Rule #007 enforces the workflow.

### [01:28] Task Completed
**Task:** Code MSJ Swimmer Dashboard - Next.js + Tailwind implementation
**Outcome:** Successfully created complete Next.js 16 + Tailwind v4 app at C:/Users/sibag/msj with: design tokens (purple/teal palette, Space Grotesk + Inter fonts), 4 reusable components (TabBar, StatCard, EventListItem, MobileLayout), and 5 pages (Home, Progress, Meets, Meet Detail, Profile). All pages compile and render correctly at localhost:3000.

### [01:35] Learnings
**Learning (Process):** Always do a final polish pass on UI work - check spacing consistency, alignment, visual rhythm. Never ship without the finishing touches that make it feel cohesive and professional.

### [01:44] Task Completed
**Task:** Polish MSJ spacing and visual consistency
**Outcome:** Tightened spacing across all 5 pages and 4 components. Established consistent spacing system: pt-6 headers, px-5 horizontal padding, p-4 cards, py-3.5 list items. Reduced typography sizes slightly for better mobile proportions. Fixed TabBar to bottom with gradient fade. App now feels cohesive and polished.

### [02:08] Learnings
**Learning (Architecture):** Precompiled renderings (minimal/compact/full) should be the first implementation priority for skill systems. On-the-fly summarization causes drift and makes the Context Assembler non-deterministic. Pre-render once, load the right size based on budget.

### [02:08] Learnings
**Learning (Architecture):** Skill Schema v1.1 architecture: (1) Split skill definition from telemetry (skill_stats.json) to avoid write amplification, (2) Add constraints field with must_do/must_not_do for hard rules, (3) Pre-compile minimal/compact/full renderings - never summarize on the fly, (4) Triggers are 3-layer: hard (intent/file pattern) → soft (embeddings/keywords) → budget ranking

### [02:08] Learnings
**Learning (Architecture):** Promotion hierarchy for repeated decisions: Most go to Project Constitution (preferences) or Patterns (reusable tactics). Only promote to Skill if it's procedural (steps/checks/rubrics). Scoring: +3 repeated ≥3 times, +2 user endorsed, +2 prevented failure, -4 contradicted later, -2 too project-specific. Threshold ≥5 to promote.

### [02:08] Learnings
**Learning (Architecture):** Cartridge Memory core insight: "Remember how to fight, not your whole life." Procedural memory (skills) is highest ROI to always load. Episodic memory (history) should be selectively retrieved. Four layers: Always-on Skills (20-40K) + Project Constitution (1-3K) + Task Pack (2-8K dynamic) + Deep Archive (searchable, not loaded).

### [02:08] Task Completed
**Task:** MSJ Swimmer Dashboard - Polish and ship
**Outcome:** Fixed spacing consistency across all 5 pages and 4 components. Established spacing system (pt-6 headers, px-5 padding, p-4 cards). Committed 953a6ee, pushed to github.com/ApeNIG/my-swim-journey

### [02:08] Task Completed
**Task:** Design Skill Schema v1.1 for Cartridge Memory System
**Outcome:** Created production-ready skill schema with: identity/classification/triggers/constraints/content/rendering/composition/lifecycle. Key innovations: precompiled minimal/compact/full renderings (eliminates summarization drift), separate skill_stats.json (avoids write amplification), 3-layer trigger system (hard → soft → budget), constraints field for hard rules. Stored decision and learnings to Duro.

### [02:12] Learnings
**Learning (Architecture):** Skill Schema v1.1 refinements: (1) Add scope field ('core' | 'domain' | 'project') with project_id to prevent project-specific quirks from contaminating global skills. (2) Add enforce hooks under constraints (preflight/postflight commands) for machine-checkable invariants - human-readable rules + optional automated checks.

### [02:13] Learnings
**Learning (Architecture):** Cartridge Memory build path (in order): (1) project_constitutions/<project_id>.yaml format + loader, (2) context_assembler.select_project_pack(project_id), (3) Promotion compactor that writes to constitution/patterns/skills WITH PROVENANCE. Every promoted thing must store provenance so you can audit why it exists. The goal: "it remembers what matters, and that's the only kind of memory that feels like intelligence."

### [02:13] Task Completed
**Task:** Spec Cartridge Memory System architecture
**Outcome:** Designed complete system: Skill Schema v1.1 (precompiled renderings, scope field, enforce hooks, separate stats), Project Constitution v1 (laws, patterns_top, deciding_axes, conflict_policy), Context Assembler routing (3-layer triggers), Promotion flow (preference→law, tactic→pattern, procedural→skill). Core insight: "Remember how to fight, not your whole life." Build path: constitution loader → select_project_pack → promotion compactor with provenance.

### [02:30] Task Completed
**Task:** Implement Cartridge Memory System core components
**Outcome:** Successfully created the full CMS infrastructure: constitution system (schema, loader, MSJ constitution), context assembler, promotion compactor, skill stats store, and git_commit skill with precompiled renderings. Added MCP tools for constitution loading. Committed to both .agent and duro-mcp repos.

### [02:38] Task Completed
**Task:** Harden Cartridge Memory System with validation and debug visibility
**Outcome:** Fixed all landmines identified: preserved ImportError, added sys.path deduplication, added input validation to constitution tools, wired duro_assemble_context and duro_promotion_report MCP tools, registered git_commit skill in index.json, fixed scope field. Stability test passed: same task produces identical context (deterministic assembly).
