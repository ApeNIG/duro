# Plan Generated by Planify (Claude Code Integration)

**Generated**: 2026-02-15T05:42:37.544483
**Cost**: $0.00 (using Claude Code as LLM)

---

# Duro Verification Intelligence & Skill Composition

## Overview

Build Duro's **Verification Intelligence** and **Skill Composition** capabilities through three interconnected skills:

1. **Enhance `design_to_code_verifier`** - Wire into devkit, improve token extraction
2. **Create `code_quality_verifier`** - Check code against patterns/standards
3. **Build `skill_composer`** - Chain skills into workflows

## Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                    VERIFICATION STACK                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────────┐     ┌──────────────────┐                  │
│  │ design_to_code   │     │ code_quality     │                  │
│  │ _verifier        │     │ _verifier        │                  │
│  │                  │     │                  │                  │
│  │ • Token extract  │     │ • Lint rules     │                  │
│  │ • CSS/Tailwind   │     │ • Pattern match  │                  │
│  │ • Drift detect   │     │ • Best practices │                  │
│  └────────┬─────────┘     └────────┬─────────┘                  │
│           │                        │                             │
│           └───────────┬────────────┘                             │
│                       ▼                                          │
│             ┌──────────────────┐                                 │
│             │  skill_composer  │                                 │
│             │                  │                                 │
│             │  • Chain skills  │                                 │
│             │  • Pass context  │                                 │
│             │  • Aggregate     │                                 │
│             └──────────────────┘                                 │
│                       │                                          │
│                       ▼                                          │
│             ┌──────────────────┐                                 │
│             │  devkit.config   │                                 │
│             │  (CI/CD hook)    │                                 │
│             └──────────────────┘                                 │
└─────────────────────────────────────────────────────────────────┘
```

## Task List

### Phase 1: Foundation (Day 1)
- [ ] 1.1 Create `skills/verification/` category directory
- [ ] 1.2 Add skill runner library (`lib/skill_runner.py`)
- [ ] 1.3 Add mock MCP test harness for testing
- [ ] 1.4 Write base verification classes (DriftReport, QualityRule, etc.)

### Phase 2: Design Verifier Enhancement (Day 1-2)
- [ ] 2.1 Add Tailwind token extraction
- [ ] 2.2 Add CSS variable mapping (`var(--color-*)`)
- [ ] 2.3 Add devkit JSON output format
- [ ] 2.4 Add severity scoring based on token importance
- [ ] 2.5 Wire to MSJ `devkit.config.json`
- [ ] 2.6 Test against MSJ codebase

### Phase 3: Code Quality Verifier (Day 2-3)
- [ ] 3.1 Create skill scaffold using `create_skill`
- [ ] 3.2 Implement rule engine with pattern matching
- [ ] 3.3 Add React rule set (10 rules)
- [ ] 3.4 Add TypeScript rule set (10 rules)
- [ ] 3.5 Add security rule set (5 rules)
- [ ] 3.6 Add fix suggestion generator
- [ ] 3.7 Test against MSJ codebase

### Phase 4: Skill Composer (Day 3-4)
- [ ] 4.1 Create skill scaffold
- [ ] 4.2 Implement workflow parser (YAML/JSON)
- [ ] 4.3 Implement step executor with context passing
- [ ] 4.4 Add failure handling modes (stop/continue/rollback)
- [ ] 4.5 Add progress callbacks
- [ ] 4.6 Create example workflows
- [ ] 4.7 Test composed verification workflow

### Phase 5: Integration (Day 4)
- [ ] 5.1 Update `skills/index.json`
- [ ] 5.2 Add skills to CMS for context assembly
- [ ] 5.3 Create `VERIFICATION.md` documentation
- [ ] 5.4 Run full verification on MSJ
- [ ] 5.5 Commit and push to `.agent` repo

## Risks & Mitigations

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| MCP tool unavailable | Medium | High | Graceful fallback to file-based ops |
| Performance too slow | Medium | Medium | Caching, incremental checks |
| Rules produce false positives | High | Low | Confidence scoring, easy suppressions |
| Skill composition too complex | Low | High | Start simple, iterate |
| Breaking existing skills | Low | High | Comprehensive tests before merge |

## Validation Criteria

1. **Unit tests pass** - Each skill has tests, all green
2. **Integration test** - Composed workflow runs end-to-end
3. **MSJ verification** - Run against real codebase, meaningful output
4. **Devkit integration** - `devkit.config.json` triggers verifier
5. **Memory logging** - Results appear in Duro's memory
6. **Performance** - Full verification < 30s on MSJ

## Key Files

```
~/.agent/
├── skills/
│   ├── verification/           # NEW
│   │   ├── code_quality_verifier.py
│   │   ├── test_code_quality_verifier.py
│   │   └── meta.json
│   ├── design/
│   │   └── design_to_code_verifier.py  # ENHANCED
│   └── meta/
│       ├── skill_composer.py   # NEW
│       └── test_skill_composer.py
├── lib/
│   └── skill_runner.py         # NEW
└── VERIFICATION.md             # NEW
```

## Success Metrics

- **Verification Coverage**: Can verify 80%+ of design tokens
- **Rule Coverage**: 25+ quality rules across 4 categories
- **Composition**: 3+ example workflows working
- **Performance**: Full MSJ verification < 30s
- **Learning**: Each run logs insights to Duro memory


---

_Generated by Planify via SuperAGI MCP | Zero external API cost_
