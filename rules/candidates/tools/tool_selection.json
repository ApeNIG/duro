{
  "id": "rule_003",
  "name": "Tool Selection by Task Class",
  "type": "soft",
  "priority": 2,
  "description": "Route tasks to appropriate tools based on task type to prevent wasted attempts",

  "task_routing": {
    "faces_photorealistic": {
      "preferred": ["DALL-E (ChatGPT)", "Gemini", "Microsoft Designer"],
      "avoid": ["Pollinations", "Flux free API", "Stable Diffusion free"],
      "reason": "Free APIs struggle with photorealistic faces"
    },
    "faces_stylized": {
      "preferred": ["Pollinations", "Midjourney", "any"],
      "avoid": [],
      "reason": "Stylized/cartoon faces are more forgiving"
    },
    "backgrounds_objects": {
      "preferred": ["Pollinations", "Flux", "any free API"],
      "avoid": [],
      "reason": "Free APIs handle non-face content well"
    },
    "text_to_speech": {
      "preferred": ["edge-tts"],
      "avoid": ["paid APIs without clear budget"],
      "reason": "edge-tts is free, reliable, high quality"
    },
    "text_to_speech_child_voice": {
      "preferred": ["edge-tts (en-US-AnaNeural)"],
      "fallback": ["ElevenLabs (if budget allows)"],
      "known_limitation": "All TTS struggles with authentic child voices",
      "reason": "Best available free option"
    },
    "code_generation": {
      "preferred": ["direct Claude output"],
      "avoid": ["external code gen APIs"],
      "reason": "Claude handles code well, no need for external tools"
    },
    "web_research": {
      "preferred": ["WebSearch", "WebFetch", "MCP tools"],
      "avoid": ["manual browsing instructions"],
      "reason": "Built-in tools are faster and more reliable"
    },
    "video_generation": {
      "preferred": ["LTX Studio (web)", "Kling AI (web)", "Runway (if budget)"],
      "avoid": ["free APIs (unreliable)"],
      "reason": "Video gen APIs are immature; web tools more reliable"
    }
  },

  "selection_process": [
    "1. Identify task class from user request",
    "2. Look up routing in task_routing",
    "3. Check if preferred tool is available",
    "4. If not, use fallback or ask user",
    "5. Log tool selection for future analysis"
  ],

  "eval_linkage": {
    "target_eval": "all",
    "metric": "tool_calls",
    "goal": "Reduce wasted tool calls by routing correctly first time"
  },

  "confidence": 0.8,
  "source": "fashanus_project_learnings",
  "last_validated": "2026-02-10",
  "times_applied": 0
}
