{
  "id": "rule_001",
  "name": "Face Distortion in Image Generation",
  "type": "hard",
  "priority": 1,

  "triggers": [
    "generating photorealistic human faces",
    "generating character portraits",
    "generating scene images with visible people",
    "user mentions 'distorted' or 'wrong' about faces",
    "facial geometry looks inconsistent in output"
  ],

  "failure_mode": {
    "description": "Free image APIs (Pollinations, Flux, etc.) produce distorted, unrealistic faces",
    "symptoms": [
      "Misaligned eyes",
      "Warped facial features",
      "Uncanny valley effect",
      "Inconsistent proportions",
      "Extra fingers/limbs (related)"
    ]
  },

  "fallback_ladder": [
    {
      "step": 1,
      "action": "Modify prompt constraints",
      "details": "Add negative prompts: 'no distorted faces, no deformed features'. Simplify face descriptions. Use 'portrait photography' style hints.",
      "success_rate": 0.3,
      "time_cost": "low"
    },
    {
      "step": 2,
      "action": "Change model/tool",
      "details": "Switch from Pollinations/Flux to web-based tools: DALL-E (ChatGPT), Gemini, Microsoft Designer. These have better face handling.",
      "success_rate": 0.8,
      "time_cost": "medium (manual)"
    },
    {
      "step": 3,
      "action": "Post-process with face restoration",
      "details": "Use CodeFormer, GFPGAN, or similar face restoration tools on generated images.",
      "success_rate": 0.6,
      "time_cost": "medium"
    },
    {
      "step": 4,
      "action": "Switch to non-photorealistic style",
      "details": "Use illustration, cartoon, or stylized art styles instead of photorealistic. These are more forgiving of imperfect faces.",
      "success_rate": 0.9,
      "time_cost": "low"
    },
    {
      "step": 5,
      "action": "Avoid faces entirely",
      "details": "Reframe the image to not show faces: back view, silhouette, cropped composition, hands/objects focus.",
      "success_rate": 1.0,
      "time_cost": "low"
    }
  ],

  "recommended_path": "For production work requiring consistent faces, start at step 2 (web-based tools). For quick tests, try step 1 first. For creative flexibility, consider step 4.",

  "stop_condition": {
    "max_attempts": 3,
    "action_on_max": "Escalate to step 2 (change tool) or ask user for preference"
  },

  "eval_linkage": {
    "target_eval": "eval_fashanus_003",
    "baseline_quality_score": 2,
    "target_quality_score": 4
  },

  "confidence": 0.95,
  "source": "fashanus_ep01_2026-02-10",
  "evidence": [
    "Episode 1A scene images had distorted faces",
    "Episode 1B generation stopped by user - faces not acceptable",
    "Multiple retry attempts with prompt changes did not improve quality"
  ],
  "last_validated": "2026-02-10",
  "times_applied": 0,
  "times_successful": 0
}
